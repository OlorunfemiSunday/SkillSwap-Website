<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Account | Skill Swap</title>

    <link
      rel="icon"
      type="image/png"
      href="https://res.cloudinary.com/dezoqbzim/image/upload/v1768668000/image_16_udh8fu.png"
    />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Saira:wght@100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />

    <!-- Tailwind -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>

  <body class="font-[Inter]">
    <!-- Background -->
    <div
      class="relative min-h-screen bg-cover bg-center"
      style="
        background-image: url(&quot;https://res.cloudinary.com/dezoqbzim/image/upload/v1769112751/SIGN_IN_hpaf3a.png&quot;);
      "
    >
      <!-- Overlay -->
      <div class="absolute inset-0 bg-black/10"></div>

      <!-- Page Content -->
      <div class="relative z-10 min-h-screen flex flex-col">
        <!-- Logo -->
        <div class="flex justify-center py-6">
          <img
            src="https://res.cloudinary.com/dezoqbzim/image/upload/v1769111476/image_15_jdtso8.png"
            alt="Skill Swap Logo"
            class="h-28 md:h-32"
          />
        </div>

        <!-- Main -->
        <div class="flex-1 flex items-center px-4 sm:px-6 lg:px-10 pb-12">
          <div
            class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-12 lg:gap-20"
          >
            <!-- LEFT CONTENT -->
            <div class="flex-1 flex items-center">
              <div>
                <h3
                  class="font-[Saira] font-semibold text-[32px] sm:text-[40px] lg:text-[50px] text-blue-950 leading-tight text-center lg:text-left"
                >
                  Create Your <br />
                  Skill Swap Account
                </h3>

                <p class="mt-4 text-gray-700 max-w-md text-sm sm:text-base">
                  Join a professional community where skills are exchanged
                  through collaborationâ€”not money.
                </p>
              </div>
            </div>

            <!-- RIGHT FORM -->
            <div class="flex-1 flex justify-center">
              <div
                class="w-full max-w-xl bg-white/20 backdrop-blur-md shadow-lg rounded-md p-6 sm:p-8 border border-white/30"
              >
                <form id="registerForm" class="w-full">
                  <!-- Header -->
                  <div class="text-center mb-6">
                    <h2
                      class="font-[Saira] font-semibold text-[24px] sm:text-[26px]"
                    >
                      Account creation
                    </h2>
                    <p class="text-gray-600 text-sm">
                      Please provide information below to create your account
                    </p>
                  </div>

                  <!-- Full Name -->
                  <div class="mb-4">
                    <label class="text-sm font-medium">Full Name</label>
                    <input
                      type="text"
                      id="name"
                      placeholder="Enter your full name (Surname first)"
                      class="mt-1 w-full h-12 px-4 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-900"
                    />
                  </div>

                  <!-- Email -->
                  <div class="mb-4">
                    <label class="text-sm font-medium">
                      Username / Email Address
                    </label>
                    <input
                      type="email"
                      id="email"
                      placeholder="useremail@gmail.com"
                      class="mt-1 w-full h-12 px-4 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-900"
                    />
                  </div>

                  <!-- Phone -->
                  <div class="mb-4">
                    <label class="text-sm font-medium">Phone Number</label>
                    <input
                      type="tel"
                      id="phone"
                      placeholder="+234 (0) 8123456789"
                      class="mt-1 w-full h-12 px-4 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-900"
                    />
                  </div>

                  <!-- Password -->
                  <div class="mb-4">
                    <label class="text-sm font-medium">Password</label>
                    <input
                      type="password"
                      id="password"
                      placeholder="********"
                      class="mt-1 w-full h-12 px-4 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-900"
                    />
                  </div>

                  <!-- Confirm Password -->
                  <div class="mb-6">
                    <label class="text-sm font-medium">Confirm Password</label>
                    <input
                      type="password"
                      id="confirmPassword"
                      placeholder="********"
                      class="mt-1 w-full h-12 px-4 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-900"
                    />
                  </div>

                  <!-- Button -->
                  <button
                    type="submit"
                    class="w-full h-12 bg-blue-950 text-white rounded-md font-medium hover:bg-blue-900 transition"
                  >
                    Continue
                  </button>

                  <!-- Footer -->
                  <p class="text-[11px] text-center text-white mt-4">
                    By creating an account, you agree to our Terms of Service,
                    Privacy Policy, and Community Guidelines.
                  </p>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Script to connect to backend -->
    <script>
      const form = document.getElementById("registerForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;

        // Validation
        if (!name || !email || !phone || !password || !confirmPassword) {
          alert("All fields are required");
          return;
        }

        if (password !== confirmPassword) {
          alert("Passwords do not match");
          return;
        }

        try {
          // This line defines "res". It must be inside the try block.
          const res = await fetch(
            "https://skillswap-api-1upf.onrender.com/api/auth/register",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ name, email, phone, password }),
            },
          );

          const data = await res.json();

          if (!res.ok) {
            alert(data.message || "Registration failed");
          } else {
            // Redirect to your Check Email page on success
            window.location.href = "checkemail.html";
          }
        } catch (err) {
          console.error("Error:", err);
          alert("Something went wrong, try again later.");
        }
      });
    </script>
  </body>
</html>
